<main class="p-4 relative">
  <h1 class="text-3xl font-bold text-center text-slate-300 mb-8 mt-8">
    Aplicacion de productos
  </h1>
  

  <!-- <button color="primary" mat-button (click)="openDialog()">Open dialog</button> -->

  <section class="sm:px-11 relative">
    <product-dialog-add
      (newProductEvent)="addProduct($event)"
      (modalEvent)="toggleModal()"
      (updateProductEvent)="editProduct($event)"
      [showModal]="showModal"
      [productToEdit]="productToEdit"
    ></product-dialog-add>
    <div class="flex justify-between">
      <button
        data-modal-target="crud-modal"
        data-modal-toggle="crud-modal"
        class="block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
        type="button"
        (click)="toggleModal()"
      >
        Crear Producto
      </button>
      <button
      (click)="signOut()"
      type="button"
      class="inline-flex items-center focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5  dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
    >
    Salir
      <svg
        class="rtl:rotate-180 w-3.5 h-3.5 ms-2"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 14 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M1 5h12m0 0L9 1m4 4L9 9"
        />
      </svg>
    </button>
    </div>
    <div *ngIf="products?.length === 0" class="w-full h-full flex items-center justify-center">
      <h2 class="text-gray-400 font-bold text-2xl">No hay productos para mostrar en este momento...</h2>
    </div>
    <ul class="mt-10" *ngIf="products && products!.length > 0">
      <li *ngFor="let product of products">
        <div
          class="flex flex-col w-full h-full p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
        >
          <h5
            class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
          >
            {{ product.title }}
          </h5>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>Handle:</b> {{ product?.handle }}
          </p>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>SKU:</b> {{ product?.sku }}
          </p>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>Gramos:</b> {{ product?.grams }}
          </p>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>Stock:</b> {{ product?.stock }}
          </p>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>Precio:</b> {{ product?.price }}
          </p>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>Precio de comparacion:</b> {{ product?.comparePrice }}
          </p>
          <p class="font-normal text-gray-700 dark:text-gray-400">
            <b>Codigo de barras:</b> {{ product?.barCode }}
          </p>
          <p
            class="text-gray-700 dark:text-gray-400 font-bold"
            *ngIf="
              product.description &&
              !product?.description?.includes('Características')
            "
          >
            Características:
          </p>
          <div
            class="text-gray-700 dark:text-gray-400"
            [innerHTML]="product?.description"
          ></div>
          <div class="w-full flex justify-center mt-4 flex-1 items-end">
            <button
              type="button"
              class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
              (click)="hanldeEditProduct(product)"
            >
              Editar
            </button>
            <button
              (click)="deleteProduct(product)"
              type="button"
              class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
            >
              Eliminar
            </button>
          </div>
        </div>
      </li>
    </ul>
  </section>
</main>
